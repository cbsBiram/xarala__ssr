{% extends "_dashboard_base.html" %} 
{% load static %} 
{% load crispy_forms_tags %} 

{% block title %} {{ title }} {% endblock title %} 

{% block sidebar %} 
    {% include "partials/_sidebar_dashboard.html" %}
{% endblock sidebar %} 

{% block content %} {% include 'partials/_tutorials.html' %} {% endblock %}

{% block extrajs %} 
<script>
    $(document).ready(function() {
        $("#submit_tutorial").on("click", function() {
            const tutorialId = $(this).attr("tutorial_id")
            let confirmation = confirm('Etes-vous sûr de vouloir soumettre ce tutoriel?'); 
            if (confirmation)
                $.ajax({
                    type: "POST",
                    url: '{% url "dashboard:submit-tutorial" %}',
                    data: {
                        'id': tutorialId,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    dataType: 'json',
                    success: function(data) {
                        document.location.reload()
                    }
                });
        })

        $("#publish_tutorial").on("click", function() {
            const tutorialId = $(this).attr("tutorial_id")
            let confirmation = confirm('Etes-vous sûr de vouloir publier ce tutoriel?'); 
            if (confirmation)
                $.ajax({
                    type: "POST",
                    url: '{% url "dashboard:submit-tutorial" %}',
                    data: {
                        'id': tutorialId,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    dataType: 'json',
                    success: function(data) {
                        document.location.reload()
                    }
                });
        })
    })
</script> 
{% endblock extrajs %}